function a8_0x3009(){const _0x1431bd=['UPDATE\x20users_rank\x20SET\x20xp\x20=\x20xp\x20+\x2010,\x20messages\x20=\x20messages\x20+\x201\x20WHERE\x20jid\x20=\x20$1','4568705JIVlEj','length','Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20données\x20de\x20l\x27utilisateur:','3277928YUdoJe','release','88568JdofgT','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','3199sGkyNq','3053818qlKGuq','config','SELECT\x20*\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','connect','DATABASE_URL','INSERT\x20INTO\x20users_rank\x20(jid,\x20xp,\x20messages)\x20VALUES\x20($1,\x20$2,\x20$3)','error','1434824FyBpjg','228849nXqEjy','query','SELECT\x20messages,\x20xp\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20bottom\x2010\x20des\x20utilisateurs:','../set','8465418tDTcOq','Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20users_rank:','rows'];a8_0x3009=function(){return _0x1431bd;};return a8_0x3009();}const a8_0x1d1c9a=a8_0x5abd;(function(_0x1b8a7c,_0x564ed5){const _0x4cb83a=a8_0x5abd,_0x3b89c4=_0x1b8a7c();while(!![]){try{const _0x5aa08d=-parseInt(_0x4cb83a(0x1b6))/0x1+-parseInt(_0x4cb83a(0x1af))/0x2+parseInt(_0x4cb83a(0x1b7))/0x3+-parseInt(_0x4cb83a(0x1aa))/0x4+parseInt(_0x4cb83a(0x1a7))/0x5+-parseInt(_0x4cb83a(0x1bc))/0x6+parseInt(_0x4cb83a(0x1ae))/0x7*(parseInt(_0x4cb83a(0x1ac))/0x8);if(_0x5aa08d===_0x564ed5)break;else _0x3b89c4['push'](_0x3b89c4['shift']());}catch(_0x42603c){_0x3b89c4['push'](_0x3b89c4['shift']());}}}(a8_0x3009,0xd1509),require('dotenv')[a8_0x1d1c9a(0x1b0)]());const {Pool}=require('pg'),s=require(a8_0x1d1c9a(0x1bb)),dbUrl=s['DATABASE_URL']?s[a8_0x1d1c9a(0x1b3)]:a8_0x1d1c9a(0x1ad),proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);function a8_0x5abd(_0x99556e,_0x20b358){const _0x3009fb=a8_0x3009();return a8_0x5abd=function(_0x5abd98,_0x1c90be){_0x5abd98=_0x5abd98-0x1a4;let _0x38d974=_0x3009fb[_0x5abd98];return _0x38d974;},a8_0x5abd(_0x99556e,_0x20b358);}async function createUsersRankTable(){const _0x114d09=a8_0x1d1c9a,_0x5e9ff3=await pool[_0x114d09(0x1b2)]();try{await _0x5e9ff3[_0x114d09(0x1b8)]('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20users_rank\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20SERIAL\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20jid\x20VARCHAR(255)\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20xp\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20messages\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20');}catch(_0x3636a0){console[_0x114d09(0x1b5)](_0x114d09(0x1a4),_0x3636a0);}finally{_0x5e9ff3[_0x114d09(0x1ab)]();}}async function ajouterOuMettreAJourUserData(_0x2614fe){const _0x3f6c94=a8_0x1d1c9a,_0x5940dd=await pool['connect']();try{const _0x4e3837=await _0x5940dd[_0x3f6c94(0x1b8)](_0x3f6c94(0x1b1),[_0x2614fe]),_0x11b012=_0x4e3837[_0x3f6c94(0x1a5)][_0x3f6c94(0x1a8)]>0x0;_0x11b012?await _0x5940dd[_0x3f6c94(0x1b8)](_0x3f6c94(0x1a6),[_0x2614fe]):await _0x5940dd[_0x3f6c94(0x1b8)](_0x3f6c94(0x1b4),[_0x2614fe,0xa,0x1]);}catch(_0xb73735){console[_0x3f6c94(0x1b5)]('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20de\x20l\x27utilisateur:',_0xb73735);}finally{_0x5940dd[_0x3f6c94(0x1ab)]();}};async function getMessagesAndXPByJID(_0x2564db){const _0x47c45a=a8_0x1d1c9a,_0x241e3e=await pool[_0x47c45a(0x1b2)]();try{const _0x25fbda=_0x47c45a(0x1b9),_0x4505af=await _0x241e3e['query'](_0x25fbda,[_0x2564db]);if(_0x4505af['rows'][_0x47c45a(0x1a8)]>0x0){const {messages:_0x215f36,xp:_0x24e998}=_0x4505af[_0x47c45a(0x1a5)][0x0];return{'messages':_0x215f36,'xp':_0x24e998};}else return{'messages':0x0,'xp':0x0};}catch(_0x2def37){return console[_0x47c45a(0x1b5)](_0x47c45a(0x1a9),_0x2def37),{'messages':0x0,'xp':0x0};}finally{_0x241e3e['release']();}}async function getBottom10Users(){const _0x2caaf2=a8_0x1d1c9a,_0x160ed9=await pool[_0x2caaf2(0x1b2)]();try{const _0x18f817='SELECT\x20jid,\x20xp\x20,\x20messages\x20FROM\x20users_rank\x20ORDER\x20BY\x20xp\x20DESC\x20LIMIT\x2010',_0x32437d=await _0x160ed9[_0x2caaf2(0x1b8)](_0x18f817);return _0x32437d[_0x2caaf2(0x1a5)];}catch(_0x21eb8e){return console[_0x2caaf2(0x1b5)](_0x2caaf2(0x1ba),_0x21eb8e),[];}finally{_0x160ed9[_0x2caaf2(0x1ab)]();}}createUsersRankTable(),module['exports']={'ajouterOuMettreAJourUserData':ajouterOuMettreAJourUserData,'getMessagesAndXPByJID':getMessagesAndXPByJID,'getBottom10Users':getBottom10Users};