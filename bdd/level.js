const a8_0x3c20f2=a8_0xafec;(function(_0x39024e,_0x24daa5){const _0x3b84d5=a8_0xafec,_0x4c721e=_0x39024e();while(!![]){try{const _0x9d10d6=parseInt(_0x3b84d5(0x167))/0x1+-parseInt(_0x3b84d5(0x16e))/0x2+parseInt(_0x3b84d5(0x16c))/0x3*(parseInt(_0x3b84d5(0x16b))/0x4)+parseInt(_0x3b84d5(0x168))/0x5*(-parseInt(_0x3b84d5(0x178))/0x6)+parseInt(_0x3b84d5(0x170))/0x7+-parseInt(_0x3b84d5(0x165))/0x8+-parseInt(_0x3b84d5(0x166))/0x9;if(_0x9d10d6===_0x24daa5)break;else _0x4c721e['push'](_0x4c721e['shift']());}catch(_0x564da1){_0x4c721e['push'](_0x4c721e['shift']());}}}(a8_0x4164,0x6fc00),require(a8_0x3c20f2(0x161))[a8_0x3c20f2(0x162)]());const {Pool}=require('pg'),s=require(a8_0x3c20f2(0x175)),dbUrl=s[a8_0x3c20f2(0x15f)]?s[a8_0x3c20f2(0x15f)]:a8_0x3c20f2(0x17a),proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);async function createUsersRankTable(){const _0x368370=a8_0x3c20f2,_0x19d4f6=await pool['connect']();try{await _0x19d4f6['query'](_0x368370(0x160));}catch(_0x2ca429){console['error'](_0x368370(0x15e),_0x2ca429);}finally{_0x19d4f6[_0x368370(0x174)]();}}function a8_0x4164(){const _0x24356c=['Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20bottom\x2010\x20des\x20utilisateurs:','2233494BkiDnt','error','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20users_rank:','DATABASE_URL','\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20users_rank\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20SERIAL\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20jid\x20VARCHAR(255)\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20xp\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20messages\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20','dotenv','config','SELECT\x20*\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20données\x20de\x20l\x27utilisateur:','2075328LtGyis','4626675nLHbFy','806894OQrXuW','5kAIYKL','SELECT\x20jid,\x20xp\x20,\x20messages\x20FROM\x20users_rank\x20ORDER\x20BY\x20xp\x20DESC\x20LIMIT\x2010','rows','882212cHpbkF','3RONIYQ','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20de\x20l\x27utilisateur:','425504TGuSOK','exports','5521411YkYwCH','length','INSERT\x20INTO\x20users_rank\x20(jid,\x20xp,\x20messages)\x20VALUES\x20($1,\x20$2,\x20$3)','connect','release','../set','query'];a8_0x4164=function(){return _0x24356c;};return a8_0x4164();}async function ajouterOuMettreAJourUserData(_0x2c8e89){const _0x2b8b2e=a8_0x3c20f2,_0x46df0b=await pool[_0x2b8b2e(0x173)]();try{const _0x4cf3f7=await _0x46df0b[_0x2b8b2e(0x176)](_0x2b8b2e(0x163),[_0x2c8e89]),_0x3674a1=_0x4cf3f7[_0x2b8b2e(0x16a)][_0x2b8b2e(0x171)]>0x0;_0x3674a1?await _0x46df0b['query']('UPDATE\x20users_rank\x20SET\x20xp\x20=\x20xp\x20+\x2010,\x20messages\x20=\x20messages\x20+\x201\x20WHERE\x20jid\x20=\x20$1',[_0x2c8e89]):await _0x46df0b['query'](_0x2b8b2e(0x172),[_0x2c8e89,0xa,0x1]);}catch(_0x491aef){console[_0x2b8b2e(0x179)](_0x2b8b2e(0x16d),_0x491aef);}finally{_0x46df0b[_0x2b8b2e(0x174)]();}};async function getMessagesAndXPByJID(_0x36d67d){const _0x565eb5=a8_0x3c20f2,_0x43fad4=await pool[_0x565eb5(0x173)]();try{const _0x4b4372='SELECT\x20messages,\x20xp\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1',_0x3e57fa=await _0x43fad4[_0x565eb5(0x176)](_0x4b4372,[_0x36d67d]);if(_0x3e57fa[_0x565eb5(0x16a)]['length']>0x0){const {messages:_0x3e31a9,xp:_0x3d38ac}=_0x3e57fa[_0x565eb5(0x16a)][0x0];return{'messages':_0x3e31a9,'xp':_0x3d38ac};}else return{'messages':0x0,'xp':0x0};}catch(_0x234a4c){return console[_0x565eb5(0x179)](_0x565eb5(0x164),_0x234a4c),{'messages':0x0,'xp':0x0};}finally{_0x43fad4[_0x565eb5(0x174)]();}}async function getBottom10Users(){const _0x33e854=a8_0x3c20f2,_0xe483f7=await pool[_0x33e854(0x173)]();try{const _0x4d6d96=_0x33e854(0x169),_0x1615bd=await _0xe483f7['query'](_0x4d6d96);return _0x1615bd['rows'];}catch(_0x4b0135){return console[_0x33e854(0x179)](_0x33e854(0x177),_0x4b0135),[];}finally{_0xe483f7['release']();}}function a8_0xafec(_0x314d01,_0x47da9f){const _0x416430=a8_0x4164();return a8_0xafec=function(_0xafec2,_0x4d1f76){_0xafec2=_0xafec2-0x15e;let _0x3a0612=_0x416430[_0xafec2];return _0x3a0612;},a8_0xafec(_0x314d01,_0x47da9f);}createUsersRankTable(),module[a8_0x3c20f2(0x16f)]={'ajouterOuMettreAJourUserData':ajouterOuMettreAJourUserData,'getMessagesAndXPByJID':getMessagesAndXPByJID,'getBottom10Users':getBottom10Users};