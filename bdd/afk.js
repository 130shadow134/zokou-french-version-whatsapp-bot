const a0_0x35a52f=a0_0x4a76;function a0_0x2f57(){const _0x15a5c2=['succes','12346356mUSjgF','exports','13625jyuOmj','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20l\x27ajout\x20ou\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27enregistrement\x20AFK:','DATABASE_URL','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20afk\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20serial\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20etat\x20text\x20DEFAULT\x20\x27off\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x20text,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20lien\x20text\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20','1272150hDqzdi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20afk\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20etat\x20=\x20$1\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20=\x20$2\x0a\x20\x20\x20\x20\x20\x20\x20\x20RETURNING\x20*;\x0a\x20\x20\x20\x20\x20\x20','7ImMqHq','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20\x27afk\x27:','2369vbbNeT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20afk\x20(id,\x20message,\x20lien)\x0a\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20($1,\x20$2,\x20$3)\x0a\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT\x20(id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20UPDATE\x20SET\x20message\x20=\x20$2,\x20lien\x20=\x20$3;\x0a\x20\x20\x20\x20\x20\x20','L\x27état\x20de\x20l\x27enregistrement\x20AFK\x20a\x20été\x20modifié\x20avec\x20succès.','48nUBafb','9rIbtuu','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20la\x20récupération\x20de\x20l\x27enregistrement\x20AFK\x20par\x20ID:','2850550lkzFuo','config','L\x27enregistrement\x20AFK\x20n\x27existe\x20pas.','not\x20defined','2024408frXIAQ','error','log','748224UebGPJ','query','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20afk\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id\x20=\x20$1;\x0a\x20\x20\x20\x20\x20\x20','100rINrZm'];a0_0x2f57=function(){return _0x15a5c2;};return a0_0x2f57();}(function(_0x3e5cb9,_0x5c134a){const _0x177e99=a0_0x4a76,_0x3b868f=_0x3e5cb9();while(!![]){try{const _0x472ada=-parseInt(_0x177e99(0x7e))/0x1*(-parseInt(_0x177e99(0x81))/0x2)+-parseInt(_0x177e99(0x97))/0x3+parseInt(_0x177e99(0x8e))/0x4*(-parseInt(_0x177e99(0x92))/0x5)+parseInt(_0x177e99(0x8b))/0x6+-parseInt(_0x177e99(0x99))/0x7*(parseInt(_0x177e99(0x88))/0x8)+-parseInt(_0x177e99(0x82))/0x9*(parseInt(_0x177e99(0x84))/0xa)+parseInt(_0x177e99(0x90))/0xb;if(_0x472ada===_0x5c134a)break;else _0x3b868f['push'](_0x3b868f['shift']());}catch(_0xbb73c6){_0x3b868f['push'](_0x3b868f['shift']());}}}(a0_0x2f57,0x42d0b),require('dotenv')[a0_0x35a52f(0x85)]());const {Pool}=require('pg'),s=require('../set');var dbUrl=s[a0_0x35a52f(0x94)]?s[a0_0x35a52f(0x94)]:'postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9';const proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig),creerTableAfk=async()=>{const _0x30ce2a=a0_0x35a52f;try{await pool[_0x30ce2a(0x8c)](_0x30ce2a(0x96)),console[_0x30ce2a(0x8a)]('La\x20table\x20\x27afk\x27\x20a\x20été\x20créée\x20avec\x20succès.');}catch(_0x1db0e1){console[_0x30ce2a(0x89)](_0x30ce2a(0x9a),_0x1db0e1);}};creerTableAfk();function a0_0x4a76(_0x2c00f6,_0x165bd9){const _0x2f577a=a0_0x2f57();return a0_0x4a76=function(_0x4a76c1,_0x5b637e){_0x4a76c1=_0x4a76c1-0x7e;let _0x50eef7=_0x2f577a[_0x4a76c1];return _0x50eef7;},a0_0x4a76(_0x2c00f6,_0x165bd9);}async function addOrUpdateAfk(_0x4493f8,_0x2e8e34,_0x32c1d4){const _0x5603d0=a0_0x35a52f;try{await pool[_0x5603d0(0x8c)](_0x5603d0(0x7f),[_0x4493f8,_0x2e8e34,_0x32c1d4]),console['log']('L\x27enregistrement\x20AFK\x20a\x20été\x20ajouté\x20ou\x20mis\x20à\x20jour\x20avec\x20succès.');}catch(_0x166c8f){console['error'](_0x5603d0(0x93),_0x166c8f);}}async function getAfkById(_0x4c5bc2){const _0x5c9518=a0_0x35a52f;try{const {rows:_0xf8c040}=await pool[_0x5c9518(0x8c)](_0x5c9518(0x8d),[_0x4c5bc2]);return _0xf8c040[0x0];}catch(_0xf81145){return console[_0x5c9518(0x89)](_0x5c9518(0x83),_0xf81145),null;}};async function changeAfkState(_0x1a1df0,_0x1114d7){const _0xdee329=a0_0x35a52f;try{const _0x4d09ef=await pool[_0xdee329(0x8c)](_0xdee329(0x98),[_0x1114d7,_0x1a1df0]);return _0x4d09ef['rows'][_0xdee329(0x95)]===0x0?(console[_0xdee329(0x8a)](_0xdee329(0x86)),_0xdee329(0x87)):(console[_0xdee329(0x8a)](_0xdee329(0x80)),_0xdee329(0x8f));}catch(_0x20e76f){console[_0xdee329(0x89)]('Une\x20erreur\x20est\x20survenue\x20lors\x20du\x20changement\x20de\x20l\x27état\x20de\x20l\x27enregistrement\x20AFK:',_0x20e76f);}}module[a0_0x35a52f(0x91)]={'addOrUpdateAfk':addOrUpdateAfk,'getAfkById':getAfkById,'changeAfkState':changeAfkState};